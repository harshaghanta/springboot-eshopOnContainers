<?xml version="1.0" encoding="UTF-8"?> 
<entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm
        http://java.sun.com/xml/ns/persistence/orm_2_0.xsd"
    version="2.0">
    <sequence-generator name="cardtype_generator" sequence-name="cardtype_seq" allocation-size="1" />
    <!-- <sequence-generator name="buyer_generator" sequence-name="buyer_seq" allocation-size="1" /> -->

    <mapped-superclass class="com.eshoponcontainers.seedWork.Entity" access="FIELD">
        <attributes>
            <id name="id"></id>
            <transient name="requestedHashCode" />
            <transient name="domainEvents" />
        </attributes>
    </mapped-superclass>

    <entity class="com.eshoponcontainers.aggregatesModel.buyerAggregate.CardType"
            access="FIELD" name="CardType">
            <table name="[ordering].[cardtypes]"></table>

        <attributes>
            <id name="id">                
                <generated-value strategy="SEQUENCE" generator="cardtype_generator" ></generated-value>                
            </id>
            <basic name="name"/>
        </attributes>
    </entity>
    

    <entity class="com.eshoponcontainers.aggregatesModel.buyerAggregate.Buyer"
            access="FIELD" name="Buyer">
            
            <table name="[ordering].[buyers]"></table>
        <attributes>
            <id name="id" access="FIELD">
                <column name="Id" />                 
                 <generated-value strategy="SEQUENCE" generator="buyer_generator" ></generated-value>             
            </id>
            <basic name="identityUUID" optional="false">
                <column  name="IdentityGuid" nullable="false"/>
            </basic>
            <basic name="name" optional="true" />
            <!-- <transient name="paymentMethods" /> -->
            <one-to-many name="paymentMethods">
                <join-column name="BuyerId" /> 
            </one-to-many>
           
        </attributes>
    </entity>



    <entity class="com.eshoponcontainers.aggregatesModel.buyerAggregate.PaymentMethod"
            access="FIELD" name="PaymentMethod">
            <table name="[ordering].[paymentmethods]"></table>
            
        <attributes>
            <id name="id">                
                <generated-value strategy="SEQUENCE" generator="paymentmethod_generator" ></generated-value>                
            </id>
            

            <basic name="alias"/>
            <basic name="cardNumber"></basic>            
            <basic name="cardHolderName"></basic>
            <basic name="expiration"></basic>
            <many-to-one name="cardType">
                <join-column name="CardTypeId" />
            </many-to-one>
           
            
            <transient name="securityNumber" />
            <!-- <transient name="cardTypeId" /> -->
        </attributes>
    </entity>


    <!-- <entity class="com.eshoponcontainers.aggregatesModel.orderAggregate" access="FIELD" name="Order">
        <table name="[ordering].[orders]"></table>
        <attributes>
            <id name="id">
                <generated-value strategy="SEQUENCE" generator="orderid_generator" ></generated-value> 
            </id>
        </attributes>
    </entity> -->
    
 
</entity-mappings>